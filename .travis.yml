language: node_js

notifications:
    email: jhosef@gmail.com

node_js:
    - "iojs"

services:
    - mongodb

env:
    global:
        - NODE_ENV: test

addons:
    sauce_connect: true

before_install:
    - npm install -g bower
    - npm install -g grunt-cli
    - npm install -g karma-cli
    - npm install -g protractor@1.5
    - webdriver-manager update
    - bower install

before_script:
    - node test/data.js
    - grunt
    - cd dist

script:
    - karma start config/karma.config.js --single-run --browsers PhantomJS
    - node server &
    - protractor config/protractor.js